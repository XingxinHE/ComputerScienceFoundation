<!DOCTYPE html>
<!-- saved from url=(0028)https://cs61a.org/lab/lab14/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="CS 61A: Structure and Interpretation of Computer Programs">
    <meta name="keywords" content="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS">
    <meta name="author" content="Pamela Fox">
    
    <meta name="viewport" content="width=device-width">

    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/jquery.min.js.download"></script>
    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/jquery.ba-throttle-debounce.min.js.download"></script>
    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/bootstrap.min.js.download"></script>
    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/hl.js.download"></script>
    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/toggledarkmode.js.download"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/dark-mode.js.download"></script>
    <link rel="stylesheet" href="./Lab 14_ Final Review _ CS 61A Spring 2022_files/bootstrap.min.css">
    <link rel="stylesheet" href="./Lab 14_ Final Review _ CS 61A Spring 2022_files/css">
    <link rel="stylesheet" href="./Lab 14_ Final Review _ CS 61A Spring 2022_files/style.css">
    <link rel="stylesheet" href="./Lab 14_ Final Review _ CS 61A Spring 2022_files/mono-blue.css">
    <link rel="icon" href="https://cs61a.org/assets/images/favicon.ico">

    

    <title>
Lab 14: Final Review | CS 61A Spring 2022
</title>
  </head>

  <body id="index" class="home" data-new-gr-c-s-check-loaded="14.1062.0" data-gr-ext-installed="">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://cs61a.org/">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/logo.png">
          </a>
        <button type="button" class="btn btn-primary" style="float: left; margin-top: 8px;"><span style="filter: grayscale(100%);">✏️</span></button></div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/lab/lab14/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Calendar
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://cs61a.org/weekly">Weekly Schedule</a></li>
                <li><a href="https://cs61a.org/office-hours">Office Hours</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/lab/lab14/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://cs61a.org/instructor">Instructors</a></li>
                <li><a href="https://cs61a.org/TAs">TAs</a></li>
                <li><a href="https://cs61a.org/tutors">Tutors</a></li>
                <li><a href="https://cs61a.org/academic-interns">Academic Interns</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/lab/lab14/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://cs61a.org/resources/">Topical Resources + Past Exams</a></li>
                <li><a href="https://tutor.cs61a.org/">PyTutor</a></li>
                <li><a href="https://code.cs61a.org/">Code</a></li>
                <li><a href="https://piazza.com/class/kxj8vcku7037li" target="_blank">Piazza</a></li>
                <li><a href="https://cs61a.org/articles/campus-res/">Department/Campus Resources</a></li>
              </ul>
            </li>
            <li><a href="https://cs61a.org/articles/about">Syllabus</a></li>
            <li><a href="https://cs61a.org/contact/">Contact</a></li>
            <li>
              <label class="switch">
                <input type="checkbox" id="toggle-mode-cb">
                <span class="slider round"></span>
              </label>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class="row">
  <div class="col-md-9">
    <header>
      <h1>
        
Lab 14: Final Review

        
        
        <ul class="inline-block list-inline">
          <li><a href="https://cs61a.org/lab/lab14/lab14.zip" class="label label-outline">lab14.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    

<p><i>Due by 11:59pm on Wednesday, April 27.</i></p>






<h2 id="starter-files">Starter Files</h2>

<p>Download <a href="https://cs61a.org/lab/lab14/lab14.zip">lab14.zip</a>.
Inside the archive, you will find starter files for the questions in this lab,
  along with a copy of the <a href="https://cs61a.org/lab/lab14/ok">Ok</a> autograder.</p>








    
<p>This lab has many files.
Remember to write in <code>lab14.scm</code> for the Scheme questions,
<code>lab14.lark</code> for the BNF question,
and <code>lab14.py</code> for all other questions.</p>


<h1 id="required-questions">Required  Questions</h1>



<h2 id="scheme">Scheme</h2>



<h3 id="q1-split">Q1: Split</h3>


<p>Implement <code>split-at</code>, which takes a list <code>lst</code> and a non-negative number <code>n</code> as
input and returns a pair <code>new</code> such that <code>(car new)</code> is the first <code>n</code>
elements of <code>lst</code> and <code>(cdr new)</code> is the remaining elements of <code>lst</code>. If <code>n</code> is
greater than the length of <code>lst</code>, <code>(car new)</code> should be <code>lst</code> and <code>(cdr new)</code>
should be <code>nil</code>.</p>

<pre><code class="scheme hljs">scm&gt; (<span class="hljs-name">car</span> (<span class="hljs-name">split-at</span> '(<span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">6</span> <span class="hljs-number">8</span> <span class="hljs-number">10</span>) <span class="hljs-number">3</span>))
(<span class="hljs-name">2</span> <span class="hljs-number">4</span> <span class="hljs-number">6</span>)
scm&gt; (<span class="hljs-name">cdr</span> (<span class="hljs-name">split-at</span> '(<span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">6</span> <span class="hljs-number">8</span> <span class="hljs-number">10</span>) <span class="hljs-number">3</span>))
(<span class="hljs-name">8</span> <span class="hljs-number">10</span>)</code></pre>



<solution>

<pre><code class="scheme hljs">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">split-at</span> lst n)
  <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)</code></pre>


</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q split-at</code><button id="copy-code-python3ok-qsplit-at" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qsplit-at").onclick = () => copyCode('python3 ok -q split-at', "copy-code-python3ok-qsplit-at");
        </script>
        <br>


<h2 id="scheme-data-abstraction">Scheme Data Abstraction</h2>



<h3 id="q2-filter-odd-tree">Q2: Filter Odd Tree</h3>


<p>Write a function <code>filter-odd</code> which takes a <code>tree</code> data abstraction and returns a new <code>tree</code> with all even <code>label</code>s replaced with <code>nil</code>.</p>

<blockquote><p>Consider using the <code>map</code> procedure to apply a one-argument function to a list.</p></blockquote>

<p>Below is a Scheme-ified data abstraction of the Tree class we've
been working with this semester.</p>

<pre><code class="scheme hljs"><span class="hljs-comment">; Constructs tree given label and list of branches</span>
(<span class="hljs-name">tree</span> label branches)

<span class="hljs-comment">; Returns the label of the tree</span>
(<span class="hljs-name">label</span> t)

<span class="hljs-comment">; Returns the list of branches of the given tree</span>
(<span class="hljs-name">branches</span> t)</code></pre>



<solution>

<pre><code class="hljs scheme">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">filter-odd</span> t)
    <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q filter_odd</code><button id="copy-code-python3ok-qfilter_odd" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qfilter_odd").onclick = () => copyCode('python3 ok -q filter_odd', "copy-code-python3ok-qfilter_odd");
        </script>
        <br>


<h2 id="programs-as-data">Programs as Data</h2>



<h3 id="q3-swap">Q3: Swap</h3>


<p>Implement <code>swap</code> which takes an expression <code>expr</code> representing a call to some procedure and returns the same expression with its first two operands swapped if the value of the second operand is greater than the value of the first. Otherwise, it should just return the original expression. For example, <code>(swap '(- 1 (+ 3 5) 7))</code> should return the expression <code>(- (+ 3 5) 1 7)</code> since <code>1</code> evaluates to <code>1</code>, <code>(+ 3 5)</code> evaluates to <code>8</code>, and <code>8 &gt; 1</code>. Any operands after the first two should not be evaluated during the execution of the procedure, and they should be left unchanged in the final expression. You may assume that every operand evaluates to a number and that there are always at least two operands in <code>expr</code>. You may want to consider using a <code>let</code> expression in addition to the provided procedures to help simplify your code.</p>

<solution>

<pre><code class="hljs scheme">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">cddr</span> s)
  (<span class="hljs-name">cdr</span> (<span class="hljs-name">cdr</span> s))
)

(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">cadr</span> s)
  (<span class="hljs-name">car</span> (<span class="hljs-name">cdr</span> s))
)

(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">caddr</span> s)
  (<span class="hljs-name">car</span> (<span class="hljs-name">cddr</span> s))
)

(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">swap</span> expr)
    <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)</code></pre>

<solution <p="">Use Ok to test your code:<p></p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q swap</code><button id="copy-code-python3ok-qswap" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qswap").onclick = () => copyCode('python3 ok -q swap', "copy-code-python3ok-qswap");
        </script>
        <br>


<h2 id="regex">Regex</h2>



<h3 id="q4-address-first-line">Q4: Address First Line</h3>


<p>Write a regular expression that parses strings and returns whether it contains
the first line of a US mailing address.</p>

<p>US mailing addresses typically contain a block number, which is a sequence
of 3-5 digits, following by a street name. The street name can consist of
multiple words but will always end with a street type abbreviation, which
itself is a sequence of 2-5 English letters. The street name can also
optionally start with a cardinal direction ("N", "E", "W", "S"). Everything
should be properly capitalized.</p>

<p>Proper capitalization means that the first letter of each name is capitalized.
It is fine to have things like "WeirdCApitalization" match.</p>

<p>See the doctests for some examples.</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">address_oneline</span><span class="hljs-params">(text)</span>:</span>
    <span class="hljs-string">"""
    Finds and returns if there are expressions in text that represent the first line
    of a US mailing address.

    &gt;&gt;&gt; address_oneline("110 Sproul Hall, Berkeley, CA 94720")
    True
    &gt;&gt;&gt; address_oneline("What's at 39177 Farwell Dr? Is there a 39177 Nearwell Dr?")
    True
    &gt;&gt;&gt; address_oneline("I just landed at 780 N McDonnell Rd, and I need to get to 1880-ish University Avenue. Help!")
    True
    &gt;&gt;&gt; address_oneline("123 Le Roy Ave")
    True
    &gt;&gt;&gt; address_oneline("110 Unabbreviated Boulevard")
    False
    &gt;&gt;&gt; address_oneline("790 lowercase St")
    False
    """</span>
    block_number = <span class="hljs-string">r'___'</span>
    cardinal_dir = <span class="hljs-string">r'___'</span> <span class="hljs-comment"># whitespace is important!</span>
    street = <span class="hljs-string">r'___'</span>
    type_abbr = <span class="hljs-string">r'___'</span>
    street_name = <span class="hljs-string">f"<span class="hljs-subst">{cardinal_dir}</span><span class="hljs-subst">{street}</span><span class="hljs-subst">{type_abbr}</span>"</span>
    <span class="hljs-keyword">return</span> bool(re.search(<span class="hljs-string">f"<span class="hljs-subst">{block_number}</span> <span class="hljs-subst">{street_name}</span>"</span>, text))</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q address_oneline</code><button id="copy-code-python3ok-qaddress_oneline" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qaddress_oneline").onclick = () => copyCode('python3 ok -q address_oneline', "copy-code-python3ok-qaddress_oneline");
        </script>
        <br>


<h2 id="bnf">BNF</h2>



<h3 id="q5-wwpd-pycombinator">Q5: WWPD: PyCombinator</h3>


<p>Consider this attempt at a BNF grammar for Pycombinator, a grammar which supports a subset of Python's functionality. Specifically, it is able to parse any expression with a Python arithmetic operator. The grammar is specified below:</p>

<pre><code class="hljs sql">?<span class="hljs-keyword">start</span>: pycomb_expression

pycomb_expression: func <span class="hljs-string">"("</span> arg (<span class="hljs-string">","</span> arg)* <span class="hljs-string">")"</span>

arg: pycomb_expression | <span class="hljs-built_in">NUMBER</span>

func: FUNCNAME

FUNCNAME: <span class="hljs-string">"add"</span> | <span class="hljs-string">"mul"</span> | <span class="hljs-string">"sub"</span>

%<span class="hljs-keyword">ignore</span> <span class="hljs-string">" "</span>
%<span class="hljs-keyword">import</span> common.NUMBER</code></pre>



<p>Let's understand and modify the functionality of this BNF with a few questions.</p>

<blockquote><p>Use Ok to test your knowledge by choosing the best answer for each of the following "What Would PyCombinator Do" questions:</p>

<pre><code class="hljs">python3 ok -q wwpd-bnf -u</code></pre></blockquote>




<h2 id="submit">Submit</h2>


<p>Make sure to submit this assignment by running:</p>

<pre><code class="hljs sql">python3 ok <span class="hljs-comment">--submit</span></code></pre>


<h1 id="recommended-questions">Recommended Questions</h1>


<p>The following problems are not required for credit on this lab but may help you prepare for the final.</p>


<h2 id="trees">Trees</h2>



<h3 id="q6-prune-min">Q6: Prune Min</h3>


<p>Write a function that prunes a <code>Tree</code> <code>t</code> mutatively. <code>t</code> and its branches
always have zero or two branches. For the trees with two branches, reduce the
number of branches from two to one by keeping the branch that has the smaller
label value. Do nothing with trees with zero branches.</p>

<p>Prune the tree in a direction of your choosing (top down or bottom up).
The result should be a linear tree.</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">prune_min</span><span class="hljs-params">(t)</span>:</span>
    <span class="hljs-string">"""Prune the tree mutatively.

    &gt;&gt;&gt; t1 = Tree(6)
    &gt;&gt;&gt; prune_min(t1)
    &gt;&gt;&gt; t1
    Tree(6)
    &gt;&gt;&gt; t2 = Tree(6, [Tree(3), Tree(4)])
    &gt;&gt;&gt; prune_min(t2)
    &gt;&gt;&gt; t2
    Tree(6, [Tree(3)])
    &gt;&gt;&gt; t3 = Tree(6, [Tree(3, [Tree(1), Tree(2)]), Tree(5, [Tree(3), Tree(4)])])
    &gt;&gt;&gt; prune_min(t3)
    &gt;&gt;&gt; t3
    Tree(6, [Tree(3, [Tree(1)])])
    """</span>
    <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q prune_min</code><button id="copy-code-python3ok-qprune_min" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qprune_min").onclick = () => copyCode('python3 ok -q prune_min', "copy-code-python3ok-qprune_min");
        </script>
        <br>


<h3 id="q7-add-trees">Q7: Add trees</h3>


<p>Define the function <code>add_trees</code>, which takes in two trees and returns a new
tree where each corresponding node from the first tree is added with the node
from the second tree. If a node at any particular position is present in one
tree but not the other, it should be present in the new tree as well.</p>

<p><em>Hint</em>: You may want to use the built-in zip function to iterate over multiple
sequences at once.</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_trees</span><span class="hljs-params">(t1, t2)</span>:</span>
    <span class="hljs-string">"""
    &gt;&gt;&gt; numbers = Tree(1,
    ...                [Tree(2,
    ...                      [Tree(3),
    ...                       Tree(4)]),
    ...                 Tree(5,
    ...                      [Tree(6,
    ...                            [Tree(7)]),
    ...                       Tree(8)])])
    &gt;&gt;&gt; print(add_trees(numbers, numbers))
    2
      4
        6
        8
      10
        12
          14
        16
    &gt;&gt;&gt; print(add_trees(Tree(2), Tree(3, [Tree(4), Tree(5)])))
    5
      4
      5
    &gt;&gt;&gt; print(add_trees(Tree(2, [Tree(3)]), Tree(2, [Tree(3), Tree(4)])))
    4
      6
      4
    &gt;&gt;&gt; print(add_trees(Tree(2, [Tree(3, [Tree(4), Tree(5)])]), \
    Tree(2, [Tree(3, [Tree(4)]), Tree(5)])))
    4
      6
        8
        5
      5
    """</span>
    <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q add_trees</code><button id="copy-code-python3ok-qadd_trees" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qadd_trees").onclick = () => copyCode('python3 ok -q add_trees', "copy-code-python3ok-qadd_trees");
        </script>
        <br>


<h2 id="objects">Objects</h2>


<p>Let's implement a game called Election. In this game, two players compete to try
and earn the most votes. Both players start with 0 votes and 100 popularity.</p>

<p>The two players alternate turns, and the first player starts. Each turn, the
current player chooses an action. There are two types of actions:</p>

<ul>
  <li>The player can debate, and either gain or lose 50 popularity. If the player
  has popularity <code>p1</code> and the other player has popularity <code>p2</code>, then the
  probability that the player gains 50 popularity is <code>max(0.1, p1 / (p1 + p2))</code>
  Note that the <code>max</code> causes the probability to never be lower than 0.1.</li>
  <li>The player can give a speech. If the player has popularity <code>p1</code> and the other
  player has popularity <code>p2</code>, then the player gains <code>p1 // 10</code> votes and
  popularity and the other player loses <code>p2 // 10</code> popularity.</li>
</ul>

<p>The game ends when a player reaches 50 votes, or after a total of 10 turns have
been played (each player has taken 5 turns). Whoever has more votes at the end
of the game is the winner!</p>


<h3 id="q8-player">Q8: Player</h3>


<p>First, let's implement the <code>Player</code> class. Fill in the <code>debate</code> and <code>speech</code>
methods, that take in another <code>Player</code> <code>other</code>, and implement the correct
behavior as detailed above. Here are two additional things to keep in mind:</p>

<ul>
  <li>In the <code>debate</code> method, you should call the provided <code>random</code> function, which
  returns a random float between 0 and 1. The player should gain 50 popularity if
  the random number is smaller than the probability described above, and lose 50
  popularity otherwise.</li>
  <li>Neither players' popularity should ever become negative. If this
  happens, set it equal to 0 instead.</li>
</ul>

<solution>

<pre><code class="hljs python"><span class="hljs-comment">### Phase 1: The Player Class</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Player</span>:</span>
    <span class="hljs-string">"""
    &gt;&gt;&gt; random = make_test_random()
    &gt;&gt;&gt; p1 = Player('Hill')
    &gt;&gt;&gt; p2 = Player('Don')
    &gt;&gt;&gt; p1.popularity
    100
    &gt;&gt;&gt; p1.debate(p2)  # random() should return 0.0
    &gt;&gt;&gt; p1.popularity
    150
    &gt;&gt;&gt; p2.popularity
    100
    &gt;&gt;&gt; p2.votes
    0
    &gt;&gt;&gt; p2.speech(p1)
    &gt;&gt;&gt; p2.votes
    10
    &gt;&gt;&gt; p2.popularity
    110
    &gt;&gt;&gt; p1.popularity
    135

    """</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, name)</span>:</span>
        self.name = name
        self.votes = <span class="hljs-number">0</span>
        self.popularity = <span class="hljs-number">100</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">debate</span><span class="hljs-params">(self, other)</span>:</span>
        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">speech</span><span class="hljs-params">(self, other)</span>:</span>
        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">choose</span><span class="hljs-params">(self, other)</span>:</span>
        <span class="hljs-keyword">return</span> self.speech</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q Player</code><button id="copy-code-python3ok-qPlayer" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qPlayer").onclick = () => copyCode('python3 ok -q Player', "copy-code-python3ok-qPlayer");
        </script>
        <br>


<h3 id="q9-game">Q9: Game</h3>


<p>Now, implement the <code>Game</code> class. Fill in the <code>play</code> method, which should
alternate between the two players, starting with <code>p1</code>, and have each player take
one turn at a time. The <code>choose</code> method in the <code>Player</code> class returns the
method, either <code>debate</code> or <code>speech</code>, that should be called to perform the
action.</p>

<p>In addition, fill in the <code>winner</code> method, which should return the
player with more votes, or <code>None</code> if the players are tied.</p>

<solution>

<pre><code class="hljs python"><span class="hljs-comment">### Phase 2: The Game Class</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Game</span>:</span>
    <span class="hljs-string">"""
    &gt;&gt;&gt; p1, p2 = Player('Hill'), Player('Don')
    &gt;&gt;&gt; g = Game(p1, p2)
    &gt;&gt;&gt; winner = g.play()
    &gt;&gt;&gt; p1 is winner
    True

    """</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, player1, player2)</span>:</span>
        self.p1 = player1
        self.p2 = player2
        self.turn = <span class="hljs-number">0</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">play</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> self.game_over():
            <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
        <span class="hljs-keyword">return</span> self.winner()

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">game_over</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-keyword">return</span> max(self.p1.votes, self.p2.votes) &gt;= <span class="hljs-number">50</span> <span class="hljs-keyword">or</span> self.turn &gt;= <span class="hljs-number">10</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">winner</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q Game</code><button id="copy-code-python3ok-qGame" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qGame").onclick = () => copyCode('python3 ok -q Game', "copy-code-python3ok-qGame");
        </script>
        <br>


<h3 id="q10-new-players">Q10: New Players</h3>


<p>The <code>choose</code> method in the <code>Player</code> class is boring, because it always returns
the <code>speech</code> method. Let's implement two new classes that inherit from <code>Player</code>,
but have more interesting <code>choose</code> methods.</p>

<p>Implement the <code>choose</code> method in the <code>AggressivePlayer</code> class, which returns the
<code>debate</code> method if the player's popularity is less than or equal to <code>other</code>'s
popularity, and <code>speech</code> otherwise. Also implement the <code>choose</code> method in the
<code>CautiousPlayer</code> class, which returns the <code>debate</code> method if the player's
popularity is 0, and <code>speech</code> otherwise.</p>

<solution>

<pre><code class="hljs python"><span class="hljs-comment">### Phase 3: New Players</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AggressivePlayer</span><span class="hljs-params">(Player)</span>:</span>
    <span class="hljs-string">"""
    &gt;&gt;&gt; random = make_test_random()
    &gt;&gt;&gt; p1, p2 = AggressivePlayer('Don'), Player('Hill')
    &gt;&gt;&gt; g = Game(p1, p2)
    &gt;&gt;&gt; winner = g.play()
    &gt;&gt;&gt; p1 is winner
    True

    """</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">choose</span><span class="hljs-params">(self, other)</span>:</span>
        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CautiousPlayer</span><span class="hljs-params">(Player)</span>:</span>
    <span class="hljs-string">"""
    &gt;&gt;&gt; random = make_test_random()
    &gt;&gt;&gt; p1, p2 = CautiousPlayer('Hill'), AggressivePlayer('Don')
    &gt;&gt;&gt; p1.popularity = 0
    &gt;&gt;&gt; p1.choose(p2) == p1.debate
    True
    &gt;&gt;&gt; p1.popularity = 1
    &gt;&gt;&gt; p1.choose(p2) == p1.debate
    False

    """</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">choose</span><span class="hljs-params">(self, other)</span>:</span>
        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q AggressivePlayer
python3 ok -q CautiousPlayer</code><button id="copy-code-python3ok-qAggressivePlayerpython3ok-qCautiousPlayer" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qAggressivePlayerpython3ok-qCautiousPlayer").onclick = () => copyCode('python3 ok -q AggressivePlayer\npython3 ok -q CautiousPlayer', "copy-code-python3ok-qAggressivePlayerpython3ok-qCautiousPlayer");
        </script>
        <br>


<h2 id="lists">Lists</h2>



<h3 id="q11-intersection---summer-2015-mt1-q4">Q11: Intersection - Summer 2015 MT1 Q4</h3>

<p>Implement <code>intersection(lst_of_lsts)</code>, which takes a list of lists and returns a list of distinct elements
that appear in all the lists in <code>lst_of_lsts</code>. If no number appears in all of the lists, return the empty list.
You may assume that <code>lst_of_lsts</code> contains at least one list.</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">intersection</span><span class="hljs-params">(lst_of_lsts)</span>:</span>
    <span class="hljs-string">"""Returns a list of distinct elements that appear in every list in
    lst_of_lsts.

    &gt;&gt;&gt; lsts1 = [[1, 2, 3], [1, 3, 5]]
    &gt;&gt;&gt; intersection(lsts1)
    [1, 3]
    &gt;&gt;&gt; lsts2 = [[1, 4, 2, 6], [7, 2, 4], [4, 4]]
    &gt;&gt;&gt; intersection(lsts2)
    [4]
    &gt;&gt;&gt; lsts3 = [[1, 2, 3], [4, 5], [7, 8, 9, 10]]
    &gt;&gt;&gt; intersection(lsts3)         # No number appears in all lists
    []
    &gt;&gt;&gt; lsts4 = [[3, 3], [1, 2, 3, 3], [3, 4, 3, 5]]
    &gt;&gt;&gt; intersection(lsts4)         # Return list of distinct elements
    [3]
    """</span>
    elements = []
    <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
    <span class="hljs-keyword">return</span> elements</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q intersection</code><button id="copy-code-python3ok-qintersection" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qintersection").onclick = () => copyCode('python3 ok -q intersection', "copy-code-python3ok-qintersection");
        </script>
        <br>


<h3 id="q12-deck-of-cards">Q12: Deck of cards</h3>


<p>Write a list comprehension that will create a deck of cards, given a
list of <code>suits</code> and a list of <code>ranks</code>. Each
element in the list will be a card, which is represented by a 2-element list
of the form <code>[suit, rank]</code>.</p>

<solution>

<pre><code class="hljs sql">def deck(suits, ranks):
    """Creates a deck of cards (a list of 2-element lists) <span class="hljs-keyword">with</span> the given
    suits <span class="hljs-keyword">and</span> ranks. <span class="hljs-keyword">Each</span> <span class="hljs-keyword">element</span> <span class="hljs-keyword">in</span> the returned <span class="hljs-keyword">list</span> should be <span class="hljs-keyword">of</span> the <span class="hljs-keyword">form</span>
    [suit, <span class="hljs-keyword">rank</span>].

    &gt;&gt;&gt; deck([<span class="hljs-string">'S'</span>, <span class="hljs-string">'C'</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
    [[<span class="hljs-string">'S'</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">'S'</span>, <span class="hljs-number">2</span>], [<span class="hljs-string">'S'</span>, <span class="hljs-number">3</span>], [<span class="hljs-string">'C'</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">'C'</span>, <span class="hljs-number">2</span>], [<span class="hljs-string">'C'</span>, <span class="hljs-number">3</span>]]
    &gt;&gt;&gt; deck([<span class="hljs-string">'S'</span>, <span class="hljs-string">'C'</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>])
    [[<span class="hljs-string">'S'</span>, <span class="hljs-number">3</span>], [<span class="hljs-string">'S'</span>, <span class="hljs-number">2</span>], [<span class="hljs-string">'S'</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">'C'</span>, <span class="hljs-number">3</span>], [<span class="hljs-string">'C'</span>, <span class="hljs-number">2</span>], [<span class="hljs-string">'C'</span>, <span class="hljs-number">1</span>]]
    &gt;&gt;&gt; deck([], [<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>])
    []
    &gt;&gt;&gt; deck([<span class="hljs-string">'S'</span>, <span class="hljs-string">'C'</span>], [])
    []
    <span class="hljs-string">"""
    "</span>*** YOUR CODE HERE ***<span class="hljs-string">"
    return ______
</span></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q deck</code><button id="copy-code-python3ok-qdeck" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qdeck").onclick = () => copyCode('python3 ok -q deck', "copy-code-python3ok-qdeck");
        </script>
        <br>


<h2 id="linked-lists">Linked Lists</h2>



<h3 id="q13-o--pascal---fall-2017-final-q4">Q13: O!-Pascal - Fall 2017 Final Q4</h3>


<p>Pasal's Triangle is perhaps familiar to you from the diagram below, which shows the first five rows.</p>

<p><img class="img-responsive center-block" src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/Pascal.png" alt="Pascal&#39;s Triangle" width="" height=""></p>

<p>Every square is the sum of the two squares above it (as illustrated by the arrows showing here the value 4
comes from), unless it doesn't have two squares above it, in whih case its value is 1.</p>

<p>Given a linked list that represents a row in Pasal's triangle, return a linked list that will represent
the row below it.</p>

<p><img class="img-responsive center-block" src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/Pascal2.png" alt="Diagonal" width="" height=""></p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pascal_row</span><span class="hljs-params">(s)</span>:</span>
    <span class="hljs-string">"""
    &gt;&gt;&gt; a = Link.empty
    &gt;&gt;&gt; for _ in range(5):
    ...     a = pascal_row(a)
    ...     print(a)
    &lt;1&gt;
    &lt;1 1&gt;
    &lt;1 2 1&gt;
    &lt;1 3 3 1&gt;
    &lt;1 4 6 4 1&gt;
    """</span>
    <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q pascal_row</code><button id="copy-code-python3ok-qpascal_row" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qpascal_row").onclick = () => copyCode('python3 ok -q pascal_row', "copy-code-python3ok-qpascal_row");
        </script>
        <br>
<script>
    $('.alwaystoggle').css('display', 'inline-block');
    $('.alwaystoggle').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
</script>

  </solution></solution></div>

  <div class="col-md-3 sticky">
    <nav class="hidden-print hidden-sm hidden-xs sidebar">
      <ul class="nav nav-stacked noselect">
  <li><a href="https://cs61a.org/lab/lab14/#required-questions">Required  Questions</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/lab/lab14/#scheme">Scheme</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab14/#q1-split">Q1: Split</a></li>
    </ul>
    <li><a href="https://cs61a.org/lab/lab14/#scheme-data-abstraction">Scheme Data Abstraction</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab14/#q2-filter-odd-tree">Q2: Filter Odd Tree</a></li>
    </ul>
    <li><a href="https://cs61a.org/lab/lab14/#programs-as-data">Programs as Data</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab14/#q3-swap">Q3: Swap</a></li>
    </ul>
    <li><a href="https://cs61a.org/lab/lab14/#regex">Regex</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab14/#q4-address-first-line">Q4: Address First Line</a></li>
    </ul>
    <li><a href="https://cs61a.org/lab/lab14/#bnf">BNF</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab14/#q5-wwpd-pycombinator">Q5: WWPD: PyCombinator</a></li>
    </ul>
    <li><a href="https://cs61a.org/lab/lab14/#submit">Submit</a></li>
  </ul>
  <li><a href="https://cs61a.org/lab/lab14/#recommended-questions">Recommended Questions</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/lab/lab14/#trees">Trees</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab14/#q6-prune-min">Q6: Prune Min</a></li>
      <li><a href="https://cs61a.org/lab/lab14/#q7-add-trees">Q7: Add trees</a></li>
    </ul>
    <li><a href="https://cs61a.org/lab/lab14/#objects">Objects</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab14/#q8-player">Q8: Player</a></li>
      <li><a href="https://cs61a.org/lab/lab14/#q9-game">Q9: Game</a></li>
      <li><a href="https://cs61a.org/lab/lab14/#q10-new-players">Q10: New Players</a></li>
    </ul>
    <li><a href="https://cs61a.org/lab/lab14/#lists">Lists</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab14/#q11-intersection---summer-2015-mt1-q4">Q11: Intersection - Summer 2015 MT1 Q4</a></li>
      <li><a href="https://cs61a.org/lab/lab14/#q12-deck-of-cards">Q12: Deck of cards</a></li>
    </ul>
    <li><a href="https://cs61a.org/lab/lab14/#linked-lists">Linked Lists</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab14/#q13-o--pascal---fall-2017-final-q4">Q13: O!-Pascal - Fall 2017 Final Q4</a></li>
    </ul>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/weekly">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours">Office Hours</a></li>
            <li><a href="https://cs61a.org/staff">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/resources">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/studying">Studying Guide</a></li>
            <li><a href="https://cs61a.org/articles/debugging">Debugging Guide</a></li>
            <li><a href="https://cs61a.org/articles/composition">Composition Guide</a></li>
            <li><a href="https://cs61a.org/articles/pair-programming">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/articles/about">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/about#assignments">Assignments</a></li>
            <li><a href="https://cs61a.org/articles/about#exams">Exams</a></li>
            <li><a href="https://cs61a.org/articles/about#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/loader.min.js.download"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="./Lab 14_ Final Review _ CS 61A Spring 2022_files/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/jsplumb.min.js.download"></script>
    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/network_storage.js.download"></script>
    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/storable.js.download"></script>
    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/editor.js.download"></script>
    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/copy-button.js.download"></script>
    <script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/env-diagram.js.download"></script>
    
<script src="./Lab 14_ Final Review _ CS 61A Spring 2022_files/sketchy.js.download"></script>
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  
</body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>