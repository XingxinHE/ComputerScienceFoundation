<!DOCTYPE html>
<!-- saved from url=(0026)https://cs61a.org/hw/hw07/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="CS 61A: Structure and Interpretation of Computer Programs">
    <meta name="keywords" content="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS">
    <meta name="author" content="Pamela Fox">
    
    <meta name="viewport" content="width=device-width">

    <script src="./Homework 7 _ CS 61A Spring 2022_files/jquery.min.js.下载"></script>
    <script src="./Homework 7 _ CS 61A Spring 2022_files/jquery.ba-throttle-debounce.min.js.下载"></script>
    <script src="./Homework 7 _ CS 61A Spring 2022_files/bootstrap.min.js.下载"></script>
    <script src="./Homework 7 _ CS 61A Spring 2022_files/hl.js.下载"></script>
    <script src="./Homework 7 _ CS 61A Spring 2022_files/toggledarkmode.js.下载"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="./Homework 7 _ CS 61A Spring 2022_files/dark-mode.js.下载"></script>
    <link rel="stylesheet" href="./Homework 7 _ CS 61A Spring 2022_files/bootstrap.min.css">
    <link rel="stylesheet" href="./Homework 7 _ CS 61A Spring 2022_files/css">
    <link rel="stylesheet" href="./Homework 7 _ CS 61A Spring 2022_files/style.css">
    <link rel="stylesheet" href="./Homework 7 _ CS 61A Spring 2022_files/mono-blue.css">
    <link rel="icon" href="https://cs61a.org/assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="./Homework 7 _ CS 61A Spring 2022_files/hw.css">


    <title>
Homework 7 | CS 61A Spring 2022
</title>
  </head>

  <body id="index" class="home" data-new-gr-c-s-check-loaded="14.1057.0" data-gr-ext-installed="">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://cs61a.org/">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="./Homework 7 _ CS 61A Spring 2022_files/logo.png">
          </a>
        <button type="button" class="btn btn-primary" style="float: left; margin-top: 8px;"><span style="filter: grayscale(100%);">✏️</span></button></div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/hw/hw07/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Calendar
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://cs61a.org/weekly">Weekly Schedule</a></li>
                <li><a href="https://cs61a.org/office-hours">Office Hours</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/hw/hw07/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://cs61a.org/instructor">Instructors</a></li>
                <li><a href="https://cs61a.org/TAs">TAs</a></li>
                <li><a href="https://cs61a.org/tutors">Tutors</a></li>
                <li><a href="https://cs61a.org/academic-interns">Academic Interns</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/hw/hw07/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://cs61a.org/resources/">Topical Resources + Past Exams</a></li>
                <li><a href="https://tutor.cs61a.org/">PyTutor</a></li>
                <li><a href="https://code.cs61a.org/">Code</a></li>
                <li><a href="https://piazza.com/class/kxj8vcku7037li" target="_blank">Piazza</a></li>
                <li><a href="https://cs61a.org/articles/campus-res/">Department/Campus Resources</a></li>
              </ul>
            </li>
            <li><a href="https://cs61a.org/articles/about">Syllabus</a></li>
            <li><a href="https://cs61a.org/contact/">Contact</a></li>
            <li>
              <label class="switch">
                <input type="checkbox" id="toggle-mode-cb">
                <span class="slider round"></span>
              </label>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class="row">
  <div class="col-md-9">
    <header>
      <h1>
        
Homework 7: Scheme Data Abstractions, Programs as Data

        
        
        <ul class="inline-block list-inline">
          <li><a href="https://cs61a.org/hw/hw07/hw07.zip" class="label label-outline">hw07.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    

<p><em>Due by 11:59pm on Thursday, April 21</em></p>





<h2>Instructions</h2>

<p>Download <a href="https://cs61a.org/hw/hw07/hw07.zip">hw07.zip</a>. Inside the archive, you will find a file called
<a href="https://cs61a.org/hw/hw07/hw07.scm">hw07.scm</a>, along with a copy of the <code>ok</code> autograder.</p>

<p><strong>Submission:</strong> When you are done, submit with <code>python3 ok
  --submit</code>.  You may submit more than once before the deadline; only the
final submission will be scored. Check that you have successfully submitted
your code on <a href="https://okpy.org/">okpy.org</a>.  See <a href="https://cs61a.org/lab/lab00#submitting-the-assignment">Lab 0</a> for more instructions on
submitting assignments.</p>

<p><strong>Using Ok:</strong> If you have any questions about using Ok, please
refer to <a href="https://cs61a.org/articles/using-ok">this guide.</a>


  </p><p><strong>Readings:</strong> You might find the following references
  useful:</p>
  <ul>
  <li><a href="https://cs61a.org/articles/scheme-spec/">Scheme Specification</a></li>
  <li><a href="https://cs61a.org/articles/scheme-builtins/">Scheme Built-in Procedure Reference</a></li>
</ul>
  

<p><strong>Grading:</strong> Homework is graded based on
correctness. Each incorrect problem will decrease the total score by one point. There is a homework recovery policy as stated in the syllabus.
<strong>This homework is out of 2 points.</strong>




    
</p><p>Scheme is a famous functional programming language from the 1970s.  It is a
dialect of Lisp (which stands for LISt Processing).  The first observation most
people make is the unique syntax, which uses a prefix notation and (often many)
nested parentheses (see <a href="http://xkcd.com/297/">http://xkcd.com/297/</a>).  Scheme
features first-class functions and optimized tail-recursion, which were
relatively new features at the time.</p>

<p>You may find it useful to try <a href="https://code.cs61a.org/scheme">code.cs61a.org/scheme</a> when
working through problems, as it can draw environment and box-and-pointer
diagrams and it lets you walk your code step-by-step (similar to Python Tutor).
Don't forget to submit your code through Ok though!</p>


<h3 id="scheme-editor">Scheme Editor</h3>


<p>As you're writing your code, you can debug using the Scheme Editor. In your <code>scheme</code> folder you will find a new editor. To run this editor, run <code>python3 editor</code>. This should pop up a window in your browser; if it does not, please navigate to <a href="localhost:31415">localhost:31415</a> and you should see it.</p>

<p>Make sure to run <code>python3 ok</code> in a separate tab or window so that the editor keeps running.</p>

<p>If you find that your code works in the online editor but not in your own interpreter, it's possible you have a bug in code from an earlier part that you'll have to track down. Every once in a while there's a bug that our tests don't catch, and if you find one you should let us know!</p>


<h2 id="required-questions">Required Questions</h2>


<br>

        <button id="toggle-1" class="btn btn-outline btn-lg alwaystoggle toggle" style="display: inline-block;">
        Getting Started Videos<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">

<h2 id="getting-started-videos">Getting Started Videos</h2>


<p>These videos may provide some helpful direction for tackling the coding
problems on this assignment.</p>

<blockquote><p>To see these videos, you should be logged into your berkeley.edu email.</p></blockquote>


            <iframe width="560" height="315" src="./Homework 7 _ CS 61A Spring 2022_files/watch.html" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><p><a href="https://youtu.be/watch?v=6jM18JXj-Q4&amp;list=PLx38hZJ5RLZea1rWe3s2JtuCIku_blUu_"> YouTube link </a></p>
</div>


<h2 id="keyword-lists">Keyword Lists</h2>


<p>In the following problems, you will explore creating two separate implementations for the same
abstraction.</p>

<p>A <em>keyword list</em> is the Scheme analogue of a <code>dict</code> in Python, with a few key
differences:</p>

<ul>
  <li>It allows for repeating keys</li>
  <li>It functions as a list as well, which allows for ordering.</li>
</ul>

<p>The <code>kwlist</code> abstraction keeps a mapping of <code>keys</code> and <code>values</code>. To create a <code>kwlist</code>,
call the constructor <code>(make-kwlist keys values)</code> where <code>keys</code> is a
Scheme list of symbols and <code>values</code> is a Scheme list of any type. This returns
some abstracted item <code>lst</code> that we can call the following methods to either
retrieve or add items:</p>

<pre><code class="scheme hljs">scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> lst (<span class="hljs-name">make-kwlist</span> '(x y z) '(<span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span>)) <span class="hljs-comment">; create the keyword list</span>
lst
scm&gt; (<span class="hljs-name">get-first-from-kwlist</span> lst <span class="hljs-symbol">'x</span>) <span class="hljs-comment">; get an item</span>
<span class="hljs-number">7</span>
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> lst (<span class="hljs-name">add-to-kwlist</span> lst <span class="hljs-symbol">'a</span> <span class="hljs-number">10</span>)) <span class="hljs-comment">; add a new item</span>
lst
scm&gt; (<span class="hljs-name">get-first-from-kwlist</span> lst <span class="hljs-symbol">'a</span>) <span class="hljs-comment">; get the new item.</span>
<span class="hljs-number">10</span></code></pre>




<h3 id="q1-keyword-list-construct">Q1: Keyword List: Construct</h3>


<p>First, implement abstractions for <code>kwlist</code> in two ways, with the following example:
<code>(kwlist '(x y z) '(7 8 9))</code></p>

<ol>
  <li><code>kwlist1</code>, which stores a keyword list in the following manner: <code>((key1 key2
  key3 ...) (value1 value2 value3 ...)</code>. With the example above, this should
  look like <code>((x y z) (7 8 9))</code>.</li>
  <li><code>kwlist2</code>, which stores a keyword list in the following manner: <code>((key1
  value1) (key2 value2) ...)</code>. With the example above, this should look like
  <code>((x 7) (y 8) (z 9))</code>.</li>
</ol>

<p>Specifically, implement constructors and selectors for <code>kwlist1</code> and <code>kwlist2</code>.</p>

<ul>
  <li>The constructors, <code>make-kwlist1</code> and <code>make-kwlist2</code>, should take in Scheme lists for both <code>keys</code> and <code>values</code>,
  and construct the abstraction as above.</li>
  <li>The selectors, <code>get-keys-kwlist1</code>, <code>get-keys-kwlist2</code>, <code>get-values-kwlist1</code>, and <code>get-values-kwlist1</code>, should take in a <code>kwlist1</code> or
  <code>kwlist2</code> and return their keys and values respectively. Note that because you are currently creating the implementation,
  you are "under the abstraction barrier;" feel free to refer to specific details of the structure of <code>kwlist1</code> and <code>kwlist2</code>.</li>
</ul>

<blockquote><p><strong>Hint</strong>: The <code>map</code> function may prove to be useful, but is not required. You may also
use the <code>cadr</code> function, which is defined for you in the file.</p></blockquote>

<pre><code class="scheme hljs">scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> ex-lst1 (<span class="hljs-name">make-kwlist1</span> '(a b c) '(<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>)))
ex-list
scm&gt; (<span class="hljs-name">get-keys-kwlist1</span> ex-lst1)
(<span class="hljs-name">a</span> b c)
scm&gt; (<span class="hljs-name">get-values-kwlist1</span> ex-lst1)
(<span class="hljs-name">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>)
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> ex-lst2 (<span class="hljs-name">make-kwlist2</span> '(a b c) '(<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>)))
ex-list
scm&gt; (<span class="hljs-name">get-keys-kwlist2</span> ex-lst)
(<span class="hljs-name">a</span> b c)
scm&gt; (<span class="hljs-name">get-values-kwlist2</span> ex-lst)
(<span class="hljs-name">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>)</code></pre>



<solution>

<pre><code class="hljs scheme">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">make-kwlist1</span> keys values)
  <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)

(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">get-keys-kwlist1</span> kwlist)
  <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)

(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">get-values-kwlist1</span> kwlist)
  <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)
(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">make-kwlist2</span> keys values)
  <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)

(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">get-keys-kwlist2</span> kwlist)
  <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)

(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">get-values-kwlist2</span> kwlist)
  <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q kwlist_construct</code><button id="copy-code-python3ok-qkwlist_construct" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qkwlist_construct").onclick = () => copyCode('python3 ok -q kwlist_construct', "copy-code-python3ok-qkwlist_construct");
        </script>
        <br>

<blockquote><p><strong>Important</strong>: For the following questions, your implementations should be invariant with respect to the abstraction used; that is,
it should work regardless of whether <code>kwlist1</code> or <code>kwlist2</code> is used. Specifically, in the tests, we will define the abstraction <code>kwlist</code> as
either <code>kwlist1</code> or <code>kwlist2</code>:</p>

<pre><code class="scheme hljs">scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> make-kwlist make-kwlist1)
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> get-keys-kwlist get-keys-kwlist1)
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> get-values-kwlist get-values-kwlist1)
<span class="hljs-comment">; tests here...</span>
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> make-kwlist make-kwlist2)
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> get-keys-kwlist get-keys-kwlist2)
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> get-values-kwlist get-values-kwlist2)
<span class="hljs-comment">; tests here...</span></code></pre>


<p><strong>You should refer to the above <code>kwlist</code> procedures, not <code>kwlist1</code> or <code>kwlist2</code>'s procedures in your implementation.</strong></p></blockquote>


<h3 id="q2-keyword-list-add">Q2: Keyword List: Add</h3>


<p>Now, implement <code>add-to-kwlist</code>, which implements support for adding a new (<code>key</code>, <code>value</code>) pair to <em>any</em> implementation
of a <code>kwlist</code>. Specifically, <code>add-to-kwlist</code> takes in a <code>kwlist</code>, a <code>key</code>, and a <code>value</code> as input, and returns a <em>new</em>
<code>kwlist</code> with updated keys and values. Note that <code>kwlist</code>s are ordered; that is, a pair <code>p1</code> that was added to a <code>kwlist</code>
before a different pair <code>p2</code> should appear earlier in the <code>kwlist</code>.</p>

<blockquote><p><strong>Hint</strong>: The <code>append</code> method may be useful here. To make your implementation work with both abstractions,
<em>be sure to use methods ending in <code>kwlist</code>, not <code>kwlist1</code> or <code>kwlist2</code></em>.</p></blockquote>

<pre><code class="scheme hljs">scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> ex-lst (<span class="hljs-name">make-kwlist</span> '(a b c) '(<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>)))
ex-lst
scm&gt; (<span class="hljs-name">get-keys-kwlist</span> ex-lst)
(<span class="hljs-name">a</span> b c)
scm&gt; (<span class="hljs-name">get-values-kwlist</span> ex-lst)
(<span class="hljs-name">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>)
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> ex-lst (<span class="hljs-name">add-to-kwlist</span> ex-lst <span class="hljs-symbol">'d</span> <span class="hljs-symbol">'4</span>))
ex-lst
scm&gt; (<span class="hljs-name">get-keys-kwlist</span> ex-lst) <span class="hljs-comment">; note that new items are at the end of the list!</span>
(<span class="hljs-name">a</span> b c d)
scm&gt; (<span class="hljs-name">get-values-kwlist</span> ex-lst) <span class="hljs-comment">; here too!</span>
(<span class="hljs-name">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>)</code></pre>



<solution>

<pre><code class="hljs scheme">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">add-to-kwlist</span> kwlist key value)
  <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q kwlist_add</code><button id="copy-code-python3ok-qkwlist_add" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qkwlist_add").onclick = () => copyCode('python3 ok -q kwlist_add', "copy-code-python3ok-qkwlist_add");
        </script>
        <br>


<h3 id="q3-optional-keyword-list-get">Q3: (Optional) Keyword List: Get</h3>


<p>Now, implement <code>get-first-from-kwlist</code>, which implements support for getting the <em>first</em> value bound to a <code>key</code> in <code>kwlist</code>. If <code>key</code> is not present in the list, the function should return <code>nil</code> to indicate
that there were no valid keys found.</p>

<blockquote><p><strong>Hint</strong>: Consider using <code>let</code> to temporarily bind names to values. To make your implementation work with both abstractions,
<em>be sure to use methods ending in <code>kwlist</code>, not <code>kwlist1</code> or <code>kwlist2</code></em>.</p></blockquote>

<pre><code class="scheme hljs">scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> ex-lst (<span class="hljs-name">make-kwlist</span> '(a b c) '(<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>)))
ex-lst
scm&gt; (<span class="hljs-name">get-first-from-kwlist</span> ex-lst <span class="hljs-symbol">'b</span>)
<span class="hljs-number">2</span>
scm&gt; (<span class="hljs-name">get-first-from-kwlist</span> ex-lst <span class="hljs-symbol">'d</span>) <span class="hljs-comment">; if not found, return nil</span>
()
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> ex-lst (<span class="hljs-name">add-to-kwlist</span> ex-lst <span class="hljs-symbol">'d</span> <span class="hljs-symbol">'4</span>))
ex-lst
scm&gt; (<span class="hljs-name">get-first-from-kwlist</span> ex-lst <span class="hljs-symbol">'b</span>)
<span class="hljs-number">2</span>
scm&gt; (<span class="hljs-name">get-first-from-kwlist</span> ex-lst <span class="hljs-symbol">'d</span>)
<span class="hljs-number">4</span>
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> ex-lst (<span class="hljs-name">add-to-kwlist</span> ex-lst <span class="hljs-symbol">'d</span> <span class="hljs-symbol">'5</span>))
ex-lst
scm&gt; (<span class="hljs-name">get-first-from-kwlist</span> ex-lst <span class="hljs-symbol">'b</span>)
<span class="hljs-number">2</span>
scm&gt; (<span class="hljs-name">get-first-from-kwlist</span> ex-lst <span class="hljs-symbol">'d</span>) <span class="hljs-comment">; return the *first* occurrence</span>
<span class="hljs-number">4</span></code></pre>



<solution>

<pre><code class="hljs scheme">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">get-first-from-kwlist</span> kwlist key)
  <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q kwlist_get</code><button id="copy-code-python3ok-qkwlist_get" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qkwlist_get").onclick = () => copyCode('python3 ok -q kwlist_get', "copy-code-python3ok-qkwlist_get");
        </script>
        <br>


<h2 id="programs-as-data">Programs as Data</h2>


<blockquote><p><strong>Note that</strong> the following question is separate from the previous questions.</p></blockquote>


<h3 id="q4-prune">Q4: Prune</h3>


<p>Implement <code>prune-expr</code>, a procedure that takes in an expression, which is represented as a list, and returns the same expression with every other argument included. The operator should not be modified.</p>

<blockquote><p><strong>Hint:</strong> You may find it helpful to write a helper function that prunes a list.</p></blockquote>

<p>The behavior of <code>prune-expr</code> is specified by the following doctests:</p>

<pre><code class="scheme hljs">scm&gt; (<span class="hljs-name">prune-expr</span> '(+ <span class="hljs-number">10</span> <span class="hljs-number">20</span>))
(<span class="hljs-name">+</span> <span class="hljs-number">10</span>)
scm&gt; (<span class="hljs-name">prune-expr</span> '(+ <span class="hljs-number">10</span> <span class="hljs-number">20</span> <span class="hljs-number">30</span>))
(<span class="hljs-name">+</span> <span class="hljs-number">10</span> <span class="hljs-number">30</span>)
scm&gt; (<span class="hljs-name">eval</span> (<span class="hljs-name">prune-expr</span> '(+ <span class="hljs-number">10</span> <span class="hljs-number">20</span> <span class="hljs-number">30</span>)))
<span class="hljs-number">40</span></code></pre>



<solution>

<pre><code class="hljs scheme">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">prune-expr</span> expr)
    (<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">prune-helper</span> lst)
      <span class="hljs-symbol">'YOUR-CODE-HERE</span>
    )
    <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q prune-expr</code><button id="copy-code-python3ok-qprune-expr" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qprune-expr").onclick = () => copyCode('python3 ok -q prune-expr', "copy-code-python3ok-qprune-expr");
        </script>
        <br>


<h2 id="chef-curry">Chef Curry</h2>

<p>Recall that <code>curry</code>ing transforms a multiple argument function into a series of higher-order, one argument functions. In the next set of questions, you will be creating functions that can automatically curry a function of any length using the notion that programs are data!</p>


<h3 id="q5-cooking-curry">Q5: Cooking Curry</h3>


<p>Implement the function <code>curry-cook</code>, which takes in a Scheme list <code>formals</code> and a quoted expression <code>body</code>. <code>curry-cook</code> should generate a program as a list which is a curried version of a lambda function. The outputted program should be a curried version of a lambda function with formal arguments equal to <code>formals</code>, and a function body equal to <code>body</code>. You may assume that all functions passed in will have more than 0 <code>formals</code>; otherwise, it would not be curry-able!</p>

<p>For example, if you wanted to curry the function <code>(lambda (x y) (+ x y))</code>, you would set <code>formals</code> equal to <code>'(x y)</code>, the <code>body</code> equal to <code>'(+ x y)</code>, and make a call to <code>curry-cook</code>: <code>(curry-cook '(x y) '(+ x y))</code>.</p>

<pre><code class="scheme hljs">scm&gt; (<span class="hljs-name">curry-cook</span> '(a) <span class="hljs-symbol">'a</span>)
(<span class="hljs-name"><span class="hljs-keyword">lambda</span></span> (a) a)
scm&gt; (<span class="hljs-name">curry-cook</span> '(x y) '(+ x y))
(<span class="hljs-name"><span class="hljs-keyword">lambda</span></span> (x) (<span class="hljs-name"><span class="hljs-keyword">lambda</span></span> (y) (<span class="hljs-name">+</span> x y)))</code></pre>



<solution>

<pre><code class="hljs scheme">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">curry-cook</span> formals body)
    <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q curry_cook</code><button id="copy-code-python3ok-qcurry_cook" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qcurry_cook").onclick = () => copyCode('python3 ok -q curry_cook', "copy-code-python3ok-qcurry_cook");
        </script>
        <br>


<h3 id="q6-consuming-curry">Q6: Consuming Curry</h3>


<p>Now that you have a function that creates lambda programs as lists, create a function which is able to evaluate lambda functions using a series of arguments. Specifically, implement the function <code>curry-consume</code>, which takes in a curried lambda <em>function</em> <code>curries</code> (not a list), and <code>apply</code>s the function to a list of arguments <code>args</code>. Similarly to the previous question, you may make several assumptions:</p>

<ol>
  <li>If <code>curries</code> is an <code>n</code>-curried function, then there will be at most <code>n</code> arguments in <code>args</code>.</li>
  <li><strong>If there are 0 arguments</strong>, then you may assume that <code>curries</code> has been fully <code>apply</code>'d with relevant arguments; in this case, <code>curries</code> now contains a value representing the output of the lambda function. Return it.</li>
</ol>

<p>Note that there can be fewer <code>args</code> than <code>formals</code> for the corresponding lambda function <code>curries</code>! In the case that there are fewer arguments, <code>curry-consume</code> should return a curried lambda function, which is the result of partially <code>apply</code>ing <code>curries</code> up to the number of <code>args</code> provdied.</p>

<blockquote><p><strong>Hint</strong>: you will need to use the <a href="https://cs61a.org/articles/scheme-builtins/#apply"><code>apply</code></a> function!</p></blockquote>

<pre><code class="scheme hljs">scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> three-curry (<span class="hljs-name">curry-cook</span> '(x y z) '(+ x (* y z))))
three-curry
scm&gt; three-curry
(<span class="hljs-name"><span class="hljs-keyword">lambda</span></span> (x) (<span class="hljs-name"><span class="hljs-keyword">lambda</span></span> (y) (<span class="hljs-name"><span class="hljs-keyword">lambda</span></span> (z) (<span class="hljs-name">+</span> x (<span class="hljs-name">*</span> y z)))))
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> three-curry-fn (<span class="hljs-name">eval</span> three-curry)) <span class="hljs-comment">; three-curry-fn is a lambda function derived from the program</span>
three-curry-fn
scm&gt; (<span class="hljs-name"><span class="hljs-keyword">define</span></span> eat-two (<span class="hljs-name">curry-consume</span> three-curry-fn '(<span class="hljs-number">1</span> <span class="hljs-number">2</span>))) <span class="hljs-comment">; pass in only two arguments, return should be a one-arg lambda function!</span>
eat-two
scm&gt; eat-two
(<span class="hljs-name"><span class="hljs-keyword">lambda</span></span> (z) (<span class="hljs-name">+</span> x (<span class="hljs-name">*</span> y z)))
scm&gt; (<span class="hljs-name">eat-two</span> <span class="hljs-number">3</span>) <span class="hljs-comment">; pass in the last argument; 1 + (2 * 3)</span>
<span class="hljs-number">7</span>
scm&gt; (<span class="hljs-name">curry-consume</span> three-curry-fn '(<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>)) <span class="hljs-comment">; all three arguments at once</span>
<span class="hljs-number">7</span></code></pre>



<solution>

<pre><code class="hljs scheme">(<span class="hljs-name"><span class="hljs-keyword">define</span></span> (<span class="hljs-name">curry-consume</span> curries args)
    <span class="hljs-symbol">'YOUR-CODE-HERE</span>
)</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q curry_consume</code><button id="copy-code-python3ok-qcurry_consume" class="inline-copy-button"><code class="nohighlight"><div class="copy-tooltip"><span>Copy</span></div>✂️</code></button></pre>
        <script>
        document.getElementById("copy-code-python3ok-qcurry_consume").onclick = () => copyCode('python3 ok -q curry_consume', "copy-code-python3ok-qcurry_consume");
        </script>
        <br>


<h2 id="optional-questions">Optional Questions</h2>

<p>Homework assignments will also contain prior exam-level questions for you to take a look at.
 These questions have no submission component; feel free to attempt them if you'd like a challenge!</p>

<ol>
  <li>Fall 2019 Final Q7c: <a href="https://cs61a.org/exam/fa19/final/61a-fa19-final.pdf#page=9">*-to-mul</a></li>
  <li>Fall 2021 Final Q5a: <a href="https://cs61a.org/exam/fa21/final/61a-fa21-final.pdf#page=18">Spice</a></li>
</ol>

<script>
    $('.alwaystoggle').css('display', 'inline-block');
    $('.alwaystoggle').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
</script>


  </div>

  <div class="col-md-3 sticky">
    <nav class="hidden-print hidden-sm hidden-xs sidebar">
      <ul class="nav nav-stacked noselect">
  <li><a href="https://cs61a.org/hw/hw07/#scheme-editor">Scheme Editor</a></li>
  <li><a href="https://cs61a.org/hw/hw07/#required-questions">Required Questions</a></li>
  <li><a href="https://cs61a.org/hw/hw07/#getting-started-videos">Getting Started Videos</a></li>
  <li><a href="https://cs61a.org/hw/hw07/#keyword-lists">Keyword Lists</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/hw07/#q1-keyword-list-construct">Q1: Keyword List: Construct</a></li>
    <li><a href="https://cs61a.org/hw/hw07/#q2-keyword-list-add">Q2: Keyword List: Add</a></li>
    <li><a href="https://cs61a.org/hw/hw07/#q3-optional-keyword-list-get">Q3: (Optional) Keyword List: Get</a></li>
  </ul>
  <li><a href="https://cs61a.org/hw/hw07/#programs-as-data">Programs as Data</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/hw07/#q4-prune">Q4: Prune</a></li>
  </ul>
  <li><a href="https://cs61a.org/hw/hw07/#chef-curry">Chef Curry</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/hw07/#q5-cooking-curry">Q5: Cooking Curry</a></li>
    <li><a href="https://cs61a.org/hw/hw07/#q6-consuming-curry">Q6: Consuming Curry</a></li>
  </ul>
  <li><a href="https://cs61a.org/hw/hw07/#optional-questions">Optional Questions</a></li>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/weekly">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours">Office Hours</a></li>
            <li><a href="https://cs61a.org/staff">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/resources">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/studying">Studying Guide</a></li>
            <li><a href="https://cs61a.org/articles/debugging">Debugging Guide</a></li>
            <li><a href="https://cs61a.org/articles/composition">Composition Guide</a></li>
            <li><a href="https://cs61a.org/articles/pair-programming">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/articles/about">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/about#assignments">Assignments</a></li>
            <li><a href="https://cs61a.org/articles/about#exams">Exams</a></li>
            <li><a href="https://cs61a.org/articles/about#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

    <script src="./Homework 7 _ CS 61A Spring 2022_files/loader.min.js.下载"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="./Homework 7 _ CS 61A Spring 2022_files/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="./Homework 7 _ CS 61A Spring 2022_files/jsplumb.min.js.下载"></script>
    <script src="./Homework 7 _ CS 61A Spring 2022_files/network_storage.js.下载"></script>
    <script src="./Homework 7 _ CS 61A Spring 2022_files/storable.js.下载"></script>
    <script src="./Homework 7 _ CS 61A Spring 2022_files/editor.js.下载"></script>
    <script src="./Homework 7 _ CS 61A Spring 2022_files/copy-button.js.下载"></script>
    <script src="./Homework 7 _ CS 61A Spring 2022_files/env-diagram.js.下载"></script>
    
<script src="./Homework 7 _ CS 61A Spring 2022_files/sketchy.js.下载"></script>
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  
</body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>